<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>THINK AI BY ABHAYRAJ RATHI</title>

  <!-- PWA Manifest -->
  <link rel="manifest" href="/manifest.json" />
  <meta name="theme-color" content="#4ade80" />

  <!-- iOS App Icon -->
  <link rel="apple-touch-icon" href="/app-icon.png" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="apple-mobile-web-app-title" content="Think AI" />

  <link rel="stylesheet" href="/style.css">
  <script type="importmap">
      {
        "imports": {
          "react": "https://aistudiocdn.com/react@^19.2.0",
          "react-dom/": "https://aistudiocdn.com/react-dom@^19.2.0/",
          "react/": "https://aistudiocdn.com/react@^19.2.0/"
        }
      }
    </script>
</head>

<body>
  <!-- Initialize accent colors from localStorage BEFORE React loads -->
  <script>
    (function () {
      const root = document.documentElement;
      // Default to Blue if missing, to avoid Green persistence
      const accentColor = localStorage.getItem('accentColor') || '#3b82f6';
      const accentGradient = localStorage.getItem('accentGradient') || 'linear-gradient(135deg, #3b82f6 0%, #60a5fa 100%)';

      root.style.setProperty('--accent', accentColor);
      root.style.setProperty('--accent-gradient', accentGradient);

      // Extract hex colors from gradient for background
      const hexColors = accentGradient.match(/#[a-fA-F0-9]{6}/g) || [accentColor];
      const hexToRgb = function (hex) {
        // Robust check - if not valid hex, return Blue fallback
        if (!hex || typeof hex !== 'string') return { r: 59, g: 130, b: 246 };
        const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
        return result ? {
          r: parseInt(result[1], 16),
          g: parseInt(result[2], 16),
          b: parseInt(result[3], 16)
        } : { r: 59, g: 130, b: 246 }; // Default Blue
      };

      const rgb = hexToRgb(accentColor);
      root.style.setProperty('--accent-light', 'rgba(' + rgb.r + ', ' + rgb.g + ', ' + rgb.b + ', 0.15)');
      root.style.setProperty('--accent-glow', 'rgba(' + rgb.r + ', ' + rgb.g + ', ' + rgb.b + ', 0.5)');
      root.style.setProperty('--border-light', 'rgba(' + rgb.r + ', ' + rgb.g + ', ' + rgb.b + ', 0.2)');
      root.style.setProperty('--accent-hover', accentColor);

      // Create background gradient
      const positions = ['25% 0%', '50% 0%', '75% 0%', '90% 80%'];
      const bgParts = hexColors.slice(0, 4).map(function (hexColor, i) {
        const c = hexToRgb(hexColor);
        // Increased opacity slightly to be more visible
        const opacity = i === 0 ? 0.25 : 0.15;
        const pos = positions[i] || positions[0];
        return 'radial-gradient(circle at ' + pos + ', rgba(' + c.r + ', ' + c.g + ', ' + c.b + ', ' + opacity + ') 0%, transparent 60%)';
      });

      root.style.setProperty('--accent-bg-gradient', bgParts.join(', '));

      // Update theme-color meta tag dynamically for Android status bar
      const themeColorMeta = document.querySelector('meta[name="theme-color"]');
      if (themeColorMeta) {
        themeColorMeta.setAttribute('content', accentColor);
      }
    })();
  </script>
  <div id="root"></div>
  <script type="module" src="/index.tsx"></script>
</body>

</html>